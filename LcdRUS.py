#  Класс вывода Русского текста на дисплей Nokia5110
#
#
from machine import Pin, SPI
import pcd8544_fb         # Вывод на Lcd Nokia5110
import time 
from math import ceil     # Округление до большего
import framebuf           # Буфер кадра на дисплее 
#
# Класс Текстового генератора
#
class FontText:
   spi=0
   lcd=0
   bl=0
   Font_W=0
   Font_H=0
   Font_I=1   # Интервал между буквами
   Font_img=dict()
   buffer=0   # Буфер экрана
   fbuf=0     # Буфер буквы
   def __init__(self):
       # Настройка интерфейса дисплея
        self.spi = SPI(0)
        self.spi.init(baudrate=2000000, polarity=0, phase=0)
        cs = Pin(5)
        dc = Pin(4)
        rst=Pin(2)
        self.bl = Pin(3, Pin.OUT, value=1)
        #initialize lcd
        self.lcd = pcd8544_fb.PCD8544_FB(self.spi, cs, dc, rst)
        self.buffer = bytearray((pcd8544_fb.HEIGHT // 8) * pcd8544_fb.WIDTH) # Битовый массив
        self.fbuf=framebuf.FrameBuffer(self.buffer, pcd8544_fb.WIDTH, pcd8544_fb.HEIGHT, framebuf.MONO_VLSB)
        # Шрифт
        self.Font_W=9; self.Font_H=13;
        # Символы
        self.Font_img['\u0020']=bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04')#4 Пробел
        self.Font_img['\u0021']=bytearray(b'\xf8\xf8\x00\x00\x00\x00\x00\x00\x0b\x0b\x00\x00\x00\x00\x00\x00\x02')#2 !    
        self.Font_img['\u0022']=bytearray(b'\x38\x38\x00\x38\x38\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04')#4 "
        self.Font_img['\u0023']=bytearray(b'\x08\x14\x08\x00\xf8\xfc\x04\x18\x00\x00\x00\x00\x07\x0f\x08\x06\x08')#4 # изменен на градус 'C
        self.Font_img['\u0024']=bytearray(b'\x00\xfc\xc2\xfc\x00\x00\x00\x00\x06\x0f\x0f\x0f\x06\x00\x00\x00\x05')#5 $ градусник  
        self.Font_img['\u002B']=bytearray(b'\x80\x80\xe0\x80\x80\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x05')#5 +    
        self.Font_img['\u002C']=bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x0c\x00\x00\x00\x00\x00\x00\x02')#2 ,    
        self.Font_img['\u002D']=bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x01\x01\x01\x01\x00\x00\x00\x00\x04')#4 -
        self.Font_img['\u002E']=bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x0c\x0c\x00\x00\x00\x00\x00\x00\x02')#2 .    
        self.Font_img['\u003A']=bytearray(b'\xc0\xc0\x00\x00\x00\x00\x00\x00\x0c\x0c\x00\x00\x00\x00\x00\x00\x02')#2 :
        self.Font_img['\u003B']=bytearray(b'\xc0\xc0\x00\x00\x00\x00\x00\x00\x1c\x0c\x00\x00\x00\x00\x00\x00\x02')#2 ;
        self.Font_img['\u003C']=bytearray(b'\x80\xc0\x60\x30\x10\x00\x00\x00\x00\x01\x03\x06\x04\x00\x00\x00\x05')#2 <
        self.Font_img['\u003D']=bytearray(b'\x40\x40\x40\x40\x40\x00\x00\x00\x08\x08\x08\x08\x00\x00\x00\x05\x05')#2 =
        self.Font_img['\u003E']=bytearray(b'\x10\x30\x60\xc0\x80\x00\x00\x00\x04\x06\x03\x01\x00\x00\x00\x00\x05')#2 >
        # Символы статусной строки
        self.Font_img['\u0400']=bytearray(b'\x00\xa0\xfe\x40\x00\x00\x00\x00\x08\x0c\x0f\x0d\x08\x00\x00\x00\x05')#5 Символ антенны
        self.Font_img['\u0401']=bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x0e\x0e\x00\x00\x00\x00\x00\x00\x08')#8 Слабый уровень сигнала
        self.Font_img['\u0402']=bytearray(b'\x00\x00\x00\x80\x80\x00\x00\x00\x0e\x0e\x00\x0f\x0f\x00\x00\x00\x08')#8 Средний уровень сигнала
        self.Font_img['\u0403']=bytearray(b'\x00\x00\x00\x80\x80\x00\xe0\xe0\x0e\x0e\x00\x0f\x0f\x00\x0f\x0f\x08')#8 Средний уровень сигнала        
        self.Font_img['\u0404']=bytearray(b'\x40\xf0\xc0\xc0\xc0\xf0\x40\x00\x00\x01\x03\x0e\x03\x01\x00\x00\x07')#8 Питание от сети
        self.Font_img['\u0405']=bytearray(b'\xf0\x08\xec\xec\x08\xf0\x00\x00\x07\x08\x0a\x0a\x08\x07\x00\x00\x07')#8 Питание от батареи    
        self.Font_img['\u0406']=bytearray(b'\xfe\x06\x06\x06\x06\x06\x0c\x08\x0f\x08\x08\x08\x08\x08\x08\x0f\x08')#8 SD вставлена
        self.Font_img['\u0407']=bytearray(b'\xfe\x06\x06\xf6\xf6\x06\x0c\xf8\x0f\x08\x08\x0a\x0a\x08\x08\x0f\x08')#8 SD вставлена
        # Цифры
        self.Font_img['\u0030']=bytearray(b'\xf0\xf8\x08\xf8\xf0\x00\x00\x00\x07\x0f\x08\x0f\x07\x00\x00\x00\x05')#2 0 
        self.Font_img['\u0031']=bytearray(b'\x10\x10\xf8\xf8\x00\x00\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x04')#2 1
        self.Font_img['\u0032']=bytearray(b'\x30\x38\x08\xf8\x70\x00\x00\x00\x08\x0e\x0f\x09\x08\x00\x00\x00\x05')#2 2
        self.Font_img['\u0033']=bytearray(b'\x30\x38\x88\xf8\x70\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 3
        self.Font_img['\u0034']=bytearray(b'\xc0\x30\xf8\xf8\x00\x00\x00\x00\x03\x02\x0f\x0f\x02\x00\x00\x00\x05')#5 4
        self.Font_img['\u0035']=bytearray(b'\x38\x38\x28\xe8\xe8\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 5
        self.Font_img['\u0036']=bytearray(b'\xf0\xf8\x48\x48\x90\x00\x00\x00\x07\x0f\x08\x08\x0f\x07\x00\x00\x06')#5 6    
        self.Font_img['\u0037']=bytearray(b'\x08\x08\xf8\xf8\x00\x00\x00\x00\x00\x0e\x0f\x00\x00\x00\x00\x00\x04')#5 7
        self.Font_img['\u0038']=bytearray(b'\x70\xf8\x88\xf8\x70\x00\x00\x00\x07\x0f\x08\x0f\x07\x00\x00\x00\x05')#5 8
        self.Font_img['\u0039']=bytearray(b'\xf0\xf8\x08\x08\xf8\xf0\x00\x00\x04\x0c\x09\x09\x0f\x07\x00\x00\x06')#5 9 
        # Английские заглавные
        self.Font_img['\u0041']=bytearray(b'\xf8\xf8\x08\xf8\xf8\x00\x00\x00\x0f\x0f\x02\x0f\x0f\x00\x00\x00\x05')#5 A
        self.Font_img['\u0042']=bytearray(b'\xf8\xf8\x88\x88\xf8\x70\x00\x00\x0f\x0f\x08\x08\x0f\x0f\x00\x00\x06')#6 B
        self.Font_img['\u0043']=bytearray(b'\xf0\xf8\x08\x08\x78\x70\x00\x00\x07\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 C
        self.Font_img['\u0044']=bytearray(b'\xf8\xf8\x08\x08\xf8\xf0\x00\x00\x0f\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 D
        self.Font_img['\u0045']=bytearray(b'\xf8\xf8\x88\x88\x00\x00\x00\x00\x0f\x0f\x08\x08\x00\x00\x00\x00\x04')#4 E
        self.Font_img['\u0046']=bytearray(b'\xf8\xf8\x88\x88\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x04')#4 F
        self.Font_img['\u0047']=bytearray(b'\xf0\xf8\x08\x88\xb8\xb0\x00\x00\x07\x0f\x08\x08\x07\x07\x00\x00\x06')#6 G
        self.Font_img['\u0048']=bytearray(b'\xf8\xf8\x80\x80\xf8\xf8\x00\x00\x0f\x0f\x00\x00\x0f\x0f\x00\x00\x06')#6 H
        self.Font_img['\u0049']=bytearray(b'\xf8\xf8\x00\x00\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x02')#4 I
        self.Font_img['\u004A']=bytearray(b'\x00\xf8\xf8\x00\x00\x00\x00\x00\x0c\x0f\x0f\x00\x00\x00\x00\x00\x03')#3 J
        self.Font_img['\u004B']=bytearray(b'\xf8\xf8\xc0\x78\x38\x00\x00\x00\x0f\x0f\x01\x0f\x0e\x00\x00\x00\x05')#4 K
        self.Font_img['\u004C']=bytearray(b'\xf8\xf8\x00\x00\x00\x00\x00\x00\x0f\x0f\x08\x08\x00\x00\x00\x00\x04')#4 L
        self.Font_img['\u004D']=bytearray(b'\xf8\xf8\x18\xf0\xe0\x18\xf8\xf8\x0f\x0f\x00\x0f\x0f\x00\x0f\x0f\x08')#8 M
        self.Font_img['\u004E']=bytearray(b'\xf8\xf8\xe0\x80\xf8\xf8\x00\x00\x0f\x0f\x00\x03\x0f\x0f\x00\x00\x06')#6 N
        self.Font_img['\u004F']=bytearray(b'\xf0\xf8\x08\x08\xf8\xf0\x00\x00\x07\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 O
        self.Font_img['\u0050']=bytearray(b'\xf8\xf8\x08\xf8\xf0\x00\x00\x00\x0f\x0f\x01\x01\x00\x00\x00\x00\x05')#5 P
        self.Font_img['\u0051']=bytearray(b'\xf0\xf8\x08\x08\xf8\xf0\x00\x00\x07\x0f\x08\x08\x1f\x17\x00\x00\x06')#5 Q
        self.Font_img['\u0052']=bytearray(b'\xf8\xf8\x08\xf8\xf0\x00\x00\x00\x0f\x0f\x01\x0f\x0c\x00\x00\x00\x05')#5 R
        self.Font_img['\u0053']=bytearray(b'\x70\xf8\x88\x38\x30\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 S
        self.Font_img['\u0054']=bytearray(b'\x08\x08\xf8\xf8\x08\x08\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x06')#6 T
        self.Font_img['\u0055']=bytearray(b'\xf8\xf8\x00\x00\xf8\xf8\x00\x00\x07\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 U
        self.Font_img['\u0056']=bytearray(b'\xf8\xf8\x00\x00\xf8\xf8\x00\x00\x03\x07\x0c\x0c\x07\x03\x00\x00\x06')#6 V
        self.Font_img['\u0057']=bytearray(b'\xf8\xf8\x00\xc0\xc0\x00\xf8\xf8\x0f\x0f\x04\x03\x03\x04\x0f\x0f\x08')#8 W
        self.Font_img['\u0058']=bytearray(b'\x18\x38\xe0\xc0\xe0\x38\x18\x00\x0c\x0e\x03\x01\x03\x0e\x0c\x00\x07')#7 X
        self.Font_img['\u0059']=bytearray(b'\x18\xf8\x80\x80\xf8\x18\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x06')#6 Y
        self.Font_img['\u005A']=bytearray(b'\x08\xc8\xf8\x38\x00\x00\x00\x00\x0e\x0f\x09\x08\x00\x00\x00\x00\x04')#6 Z
        # Английские прописные
        self.Font_img['\u0061']=bytearray(b'\x60\x70\x10\xf0\xe0\x00\x00\x00\x0e\x0f\x09\x0f\x0f\x00\x00\x00\x05')#5 a
        self.Font_img['\u0062']=bytearray(b'\xf8\xf8\x40\xc0\xc0\x00\x00\x00\x0f\x0f\x08\x0f\x0f\x00\x00\x00\x05')#5 b
        self.Font_img['\u0063']=bytearray(b'\xe0\xf0\x10\x70\x60\x00\x00\x00\x07\x0f\x08\x0e\x06\x00\x00\x00\x05')#5 c
        self.Font_img['\u0064']=bytearray(b'\x80\xc0\x40\xf8\xf8\x00\x00\x00\x07\x0f\x08\x0f\x0f\x00\x00\x00\x05')#5 d
        self.Font_img['\u0065']=bytearray(b'\xe0\xf0\x90\xf0\xe0\x00\x00\x00\x07\x0f\x08\x0e\x06\x00\x00\x00\x05')#5 e
        self.Font_img['\u0066']=bytearray(b'\x40\xf0\xf8\x58\x00\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x04')#4 f
        self.Font_img['\u0067']=bytearray(b'\xe0\xf0\x10\xf0\xf0\x00\x00\x00\x09\x1b\x12\x1f\x0f\x00\x00\x00\x05')#5 g
        self.Font_img['\u0068']=bytearray(b'\xf8\xf8\x40\xc0\x80\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x05')#5 h
        self.Font_img['\u0069']=bytearray(b'\xd0\xd0\x00\x00\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x02')#2 i
        self.Font_img['\u006A']=bytearray(b'\x20\xe8\xe8\x00\x00\x00\x00\x00\x18\x1f\x0f\x00\x00\x00\x00\x00\x03')#3 j
        self.Font_img['\u006B']=bytearray(b'\xf0\xf0\x80\xf0\x30\x00\x00\x00\x0f\x0f\x01\x0f\x0c\x00\x00\x00\x05')#3 k
        self.Font_img['\u006C']=bytearray(b'\x08\xf8\xf8\x00\x00\x00\x00\x00\x08\x0f\x0f\x08\x00\x00\x00\x00\x04')#4 l
        self.Font_img['\u006D']=bytearray(b'\xf0\xf0\x10\xe0\xf0\x10\xf0\xe0\x0f\x0f\x00\x0f\x0f\x00\x0f\x0f\x08')#8 m    
        self.Font_img['\u006E']=bytearray(b'\xf0\xf0\x10\xf0\xe0\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x05')#5 n     
        self.Font_img['\u006F']=bytearray(b'\xe0\xf0\x10\xf0\xe0\x00\x00\x00\x07\x0f\x08\x0f\x07\x00\x00\x00\x05')#5 o     
        self.Font_img['\u0070']=bytearray(b'\xf0\xf0\x10\xf0\xf0\x00\x00\x00\x0f\x0f\x01\x01\x01\x00\x00\x00\x05')#5 p 
        self.Font_img['\u0071']=bytearray(b'\xe0\xf0\x10\xf0\xf0\x00\x00\x00\x07\x0f\x08\x1f\x1f\x00\x00\x00\x05')#5 q
        self.Font_img['\u0072']=bytearray(b'\xf0\xf0\x30\x00\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x03')#3 r    
        self.Font_img['\u0073']=bytearray(b'\xe0\xf0\x90\xb0\x30\x00\x00\x00\x0c\x0d\x09\x0f\x07\x00\x00\x00\x05')#5 s
        self.Font_img['\u0074']=bytearray(b'\x20\xf8\xf8\x20\x00\x00\x00\x00\x00\x07\x0f\x0c\x00\x00\x00\x00\x04')#5 t    
        self.Font_img['\u0075']=bytearray(b'\xf0\xf0\x00\xf0\xf0\x00\x00\x00\x07\x0f\x08\x0f\x0f\x00\x00\x00\x05')#5 u    
        self.Font_img['\u0076']=bytearray(b'\xf0\xf0\x00\x00\x00\xf0\xf0\x00\x01\x03\x06\x0c\x06\x03\x00\x00\x07')#7 v
        self.Font_img['\u0077']=bytearray(b'\xf0\xf0\x00\x80\x80\x00\xf0\xf0\x0f\x0f\x04\x03\x03\x04\x0f\x0f\x08')#8 w    
        self.Font_img['\u0078']=bytearray(b'\x30\x70\x80\x80\x70\x30\x00\x00\x0c\x0e\x01\x01\x0e\x0c\x00\x00\x06')#6 x
        self.Font_img['\u0079']=bytearray(b'\x70\xf0\x00\x00\xf0\x70\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x06')#6 y
        self.Font_img['\u007A']=bytearray(b'\x10\x90\xf0\x70\x00\x00\x00\x00\x0e\x0f\x09\x08\x00\x00\x00\x00\x04')#6 z
         # Заглавные русские
        self.Font_img['\u0410']=bytearray(b'\xf0\xf8\x08\xf8\xf8\x00\x00\x00\x0f\x0f\x02\x0f\x0f\x00\x00\x00\x05')#5 A
        self.Font_img['\u0411']=bytearray(b'\xf8\xf8\x48\x48\xc8\x88\x00\x00\x0f\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 Б
        self.Font_img['\u0412']=bytearray(b'\xf8\xf8\x48\x48\xf8\xb0\x00\x00\x0f\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 В
        self.Font_img['\u0413']=bytearray(b'\xf8\xf8\x08\x08\x08\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x04')#4 Г
        self.Font_img['\u0414']=bytearray(b'\x00\xf8\xf8\x08\x08\xf8\xf8\x00\x1e\x0f\x09\x08\x08\x0f\x1f\x00\x07')#7 Д
        self.Font_img['\u0415']=bytearray(b'\xf8\xf8\x88\x88\x00\x00\x00\x00\x0f\x0f\x08\x08\x00\x00\x00\x00\x04')#4 Е
        self.Font_img['\u0416']=bytearray(b'\x78\x78\x80\xf8\xf8\x80\x78\x78\x0f\x0f\x00\x0f\x0f\x00\x0f\x0f\x08')#8 Ж
        self.Font_img['\u0417']=bytearray(b'\x30\x38\x88\xf8\x70\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 З
        self.Font_img['\u0418']=bytearray(b'\xf8\xf8\x80\xf0\xf8\xf8\x00\x00\x0f\x0f\x03\x00\x0f\x0f\x00\x00\x06')#6 И   
        self.Font_img['\u0419']=bytearray(b'\xf8\xf8\x83\xf2\xfb\xf8\x00\x00\x0f\x0f\x03\x00\x0f\x0f\x00\x00\x06')#6 Й  
        self.Font_img['\u041A']=bytearray(b'\xf8\xf8\x40\xb8\xb8\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x07')#5 К
        self.Font_img['\u041B']=bytearray(b'\x00\xf8\xf8\x08\xf8\xf8\x00\x00\x08\x0f\x07\x00\x0f\x0f\x00\x00\x06')#6 Л
        self.Font_img['\u041C']=bytearray(b'\xf8\xf8\x20\xc0\xc0\x20\xf8\xf8\x0f\x0f\x00\x00\x00\x00\x0f\x0f\x08')#7 М
        self.Font_img['\u041D']=bytearray(b'\xf8\xf8\x40\x40\xf8\xf8\x00\x00\x0f\x0f\x00\x00\x0f\x0f\x00\x00\x06')#6 Н
        self.Font_img['\u041E']=bytearray(b'\xf0\xf8\x08\x08\xf8\xf0\x00\x00\x07\x0f\x08\x08\x0f\x07\x00\x00\x06')#6 О
        self.Font_img['\u041F']=bytearray(b'\xf8\xf8\x08\x08\xf8\xf8\x00\x00\x0f\x0f\x00\x00\x0f\x0f\x00\x00\x06')#6 П
        self.Font_img['\u0420']=bytearray(b'\xf8\xf8\x88\xf8\xf8\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x05')#5 Р
        self.Font_img['\u0421']=bytearray(b'\xf0\xf8\x08\x08\x38\x30\x00\x00\x07\x0f\x08\x08\x0e\x06\x00\x00\x06')#6 С
        self.Font_img['\u0422']=bytearray(b'\x08\x08\xf8\xf8\x08\x08\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x06')#6 Т
        self.Font_img['\u0423']=bytearray(b'\x18\x78\xe0\xc0\xe0\x78\x18\x00\x0c\x0e\x07\x03\x00\x00\x00\x00\x07')#7 У
        self.Font_img['\u0424']=bytearray(b'\xe0\xf0\x10\xfc\xfc\x10\xf0\xe0\x01\x03\x02\x0f\x0f\x02\x03\x01\x07')#7 Ф    
        self.Font_img['\u0425']=bytearray(b'\x18\x38\xe0\xc0\xe0\x38\x18\x00\x0c\x0e\x03\x01\x03\x0e\x0c\x00\x07')#7 X     
        self.Font_img['\u0426']=bytearray(b'\xf8\xf8\x00\x00\xf8\xf8\x00\x00\x0f\x0f\x08\x08\x0f\x0f\x18\x00\x07')#7 Ц     
        self.Font_img['\u0427']=bytearray(b'\xf8\xf8\x00\x00\xf8\xf8\x00\x00\x01\x01\x01\x01\x0f\x0f\x00\x00\x06')#6 Ч
        self.Font_img['\u0428']=bytearray(b'\xf8\xf8\x00\xf8\xf8\x00\xf8\xf8\x0f\x0f\x08\x0f\x0f\x08\x0f\x0f\x08')#8 Ш
        self.Font_img['\u0429']=bytearray(b'\xf8\xf8\x00\xf8\xf8\x00\xf8\xf8\x0f\x0f\x08\x0f\x0f\x08\x1f\x1f\x08')#8 Щ
        self.Font_img['\u042A']=bytearray(b'\x08\xf8\xf8\x40\xc0\xc0\x00\x00\x00\x0f\x0f\x08\x0f\x0f\x00\x00\x06')#6 Ъ
        self.Font_img['\u042B']=bytearray(b'\xf8\xf8\x40\xc0\x00\x00\xf8\xf8\x0f\x0f\x08\x0f\x07\x00\x0f\x0f\x08')#8 Ы
        self.Font_img['\u042C']=bytearray(b'\xf8\xf8\x40\xc0\x00\x00\x00\x00\x0f\x0f\x08\x0f\x07\x00\x00\x00\x06')#6 Ь
        self.Font_img['\u042D']=bytearray(b'\x30\x38\x88\xf8\xf0\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 Э
        self.Font_img['\u042E']=bytearray(b'\xf8\xf8\x80\xf0\xf8\x08\xf8\xf0\x0f\x0f\x00\x07\x0f\x08\x0f\x07\x07')#7 Ю
        self.Font_img['\u042F']=bytearray(b'\x70\xf8\x88\xf8\xf8\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x05')#5 Я
        # Строчные русские буквы
        self.Font_img['\u0430']=bytearray(b'\x20\x90\x90\xf0\xe0\x00\x00\x00\x07\x0f\x08\x0f\x0f\x00\x00\x00\x05')#5 а
        self.Font_img['\u0431']=bytearray(b'\xf0\xf8\x28\xe8\xe8\x00\x00\x00\x07\x0f\x08\x0f\x07\x00\x00\x00\x05')#5 б
        self.Font_img['\u0432']=bytearray(b'\xf0\xf0\x90\xf0\x70\x00\x00\x00\x0f\x0f\x08\x0f\x0f\x00\x00\x00\x05')#5 в
        self.Font_img['\u0433']=bytearray(b'\xf0\xf0\x10\x10\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x00\x04')#4 г
        self.Font_img['\u0434']=bytearray(b'\x00\xf0\xf0\x10\xf0\xf0\x00\x00\x1c\x0f\x09\x08\x0f\x1f\x00\x00\x06')#6 д
        self.Font_img['\u0435']=bytearray(b'\xe0\xf0\x90\xf0\xe0\x00\x00\x00\x07\x0f\x08\x0e\x06\x00\x00\x00\x05')#5 е
        self.Font_img['\u0436']=bytearray(b'\xf0\xf0\x00\xf0\xf0\x00\xf0\xf0\x0e\x0e\x01\x0f\x0f\x01\x0e\x0e\x08')#8 ж
        self.Font_img['\u0437']=bytearray(b'\x30\x30\x90\xf0\x60\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 з
        self.Font_img['\u0438']=bytearray(b'\xf0\xf0\x00\xe0\xf0\xf0\x00\x00\x0f\x0f\x07\x00\x0f\x0f\x00\x00\x06')#6 и
        self.Font_img['\u0439']=bytearray(b'\xf0\xf0\x06\xe4\xf6\xf0\x00\x00\x0f\x0f\x07\x00\x0f\x0f\x00\x00\x06')#6 й
        self.Font_img['\u043A']=bytearray(b'\xf0\xf0\x80\x70\x30\x00\x00\x00\x0f\x0f\x00\x0f\x0e\x00\x00\x00\x05')#5 к
        self.Font_img['\u043B']=bytearray(b'\x00\xf0\xf0\x10\xf0\xf0\x00\x00\x08\x0f\x0f\x00\x0f\x0f\x00\x00\x06')#6 л
        self.Font_img['\u043C']=bytearray(b'\xf0\xf0\xc0\x00\xc0\xf0\xf0\x00\x0f\x0f\x00\x01\x00\x0f\x0f\x00\x07')#7 м
        self.Font_img['\u043D']=bytearray(b'\xf0\xf0\x80\xf0\xf0\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x05')#5 н
        self.Font_img['\u043E']=bytearray(b'\xe0\xf0\x10\xf0\xe0\x00\x00\x00\x07\x0f\x08\x0f\x07\x00\x00\x00\x05')#5 o
        self.Font_img['\u043F']=bytearray(b'\xf0\xf0\x10\xf0\xf0\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x05')#5 п
        self.Font_img['\u0440']=bytearray(b'\xf0\xf0\x10\xf0\xf0\x00\x00\x00\x1f\x1f\x08\x0f\x0f\x00\x00\x00\x05')#5 р
        self.Font_img['\u0441']=bytearray(b'\xe0\xf0\x10\x70\x60\x00\x00\x00\x07\x0f\x08\x0e\x06\x00\x00\x00\x05')#5 c
        self.Font_img['\u0442']=bytearray(b'\x10\xf0\xf0\x10\x00\x00\x00\x00\x00\x0f\x0f\x00\x00\x00\x00\x00\x04')#4 т
        self.Font_img['\u0443']=bytearray(b'\x70\xf0\x80\x00\xf0\x70\x00\x00\x00\x0c\x0f\x03\x01\x00\x00\x00\x06')#6 y
        self.Font_img['\u0444']=bytearray(b'\xf0\xf0\x10\xf8\xf8\x10\xf0\xf0\x0f\x0f\x08\x1f\x1f\x08\x0f\x0f\x08')#8 ф
        self.Font_img['\u0445']=bytearray(b'\x30\x70\x80\x80\x70\x30\x00\x00\x0c\x0e\x01\x01\x0e\x0c\x00\x00\x06')#6 x
        self.Font_img['\u0446']=bytearray(b'\xf0\xf0\x00\x00\xf0\xf0\x00\x00\x0f\x0f\x08\x08\x0f\x1f\x00\x00\x06')#6 ц
        self.Font_img['\u0447']=bytearray(b'\xf0\xf0\x00\xf0\xf0\x00\x00\x00\x03\x03\x02\x0f\x0f\x00\x00\x00\x05')#5 ч
        self.Font_img['\u0448']=bytearray(b'\xf0\xf0\x00\xf0\xf0\x00\xf0\xf0\x0f\x0f\x08\x0f\x0f\x08\x0f\x0f\x08')#8 ш
        self.Font_img['\u0449']=bytearray(b'\xf0\xf0\x00\xf0\xf0\x00\xf0\xf0\x0f\x0f\x08\x0f\x0f\x08\x1f\x1f\x08')#8 щ
        self.Font_img['\u044A']=bytearray(b'\x10\xf0\xf0\x80\x80\x80\x00\x00\x00\x0f\x0f\x08\x0f\x0f\x00\x00\x06')#6 ъ
        self.Font_img['\u044B']=bytearray(b'\xf0\xf0\x80\x80\x80\x00\xf0\xf0\x0f\x0f\x08\x0f\x0f\x00\x0f\x0f\x08')#8 ы
        self.Font_img['\u044C']=bytearray(b'\xf0\xf0\x80\x80\x80\x00\x00\x00\x0f\x0f\x08\x0f\x0f\x00\x00\x00\x05')#5 ь
        self.Font_img['\u044D']=bytearray(b'\x20\x30\x90\xf0\xe0\x00\x00\x00\x06\x0e\x08\x0f\x07\x00\x00\x00\x05')#5 э
        self.Font_img['\u044E']=bytearray(b'\xf0\xf0\x80\xe0\xf0\x10\xf0\xE0\x0f\x0f\x00\x07\x0f\x08\x0f\x07\x08')#8 ю
        self.Font_img['\u044F']=bytearray(b'\x60\xf0\x90\xf0\xf0\x00\x00\x00\x0f\x0f\x00\x0f\x0f\x00\x00\x00\x05')#5 я
#        
#Отрисует строку по центру строки             
   def StrtoCenter(self,Str,y):
       # Определяем длину строки
       a=0
       for i in range(0,len(Str)):
            buf=self.Font_img[Str[i]]
            a=a+buf[16]+self.Font_I
       # Ширина экрана 84
       # Находим начальную X    (84-длина строки)/2
       a=int((84-a)/2)     
       self.ArraytoBuffer(Str,a,y) 
#
#Отрисует строку в указаной позиции   
   def ArraytoBuffer(self,Str,x,y):
        x1=x
        for i in range(0,len(Str)):
            Fontbuf= self.Font_img[Str[i]]
            Fontb=framebuf.FrameBuffer(Fontbuf, 8, 13, framebuf.MONO_VLSB) # Инструментарий переноса    
            self.fbuf.blit(Fontb, x, y, 0)
            x=x+Fontbuf[16]+self.Font_I
        self.lcd.data(self.buffer)               
        del(x1,i,Fontbuf,Fontb) 
# Настройка интерфейса дисплея
#spi = SPI(0)
#spi.init(baudrate=2000000, polarity=0, phase=0)
#cs = Pin(5)
#dc = Pin(4)
#rst=Pin(2)
#bl = Pin(3, Pin.OUT, value=1)
#initialize lcd
#lcd = pcd8544_fb.PCD8544_FB(spi, cs, dc, rst)
#buffer = bytearray((pcd8544_fb.HEIGHT // 8) * pcd8544_fb.WIDTH) # Битовый массив
#fbuf=framebuf.FrameBuffer(buffer, pcd8544_fb.WIDTH, pcd8544_fb.HEIGHT, framebuf.MONO_VLSB)


#****************************************************
# Пишет в буфер экрана строку Str
#
#def ArraytoBuffer(Str,x,y):
#    x1=x
#    for i in range(0,len(Str)):
#        Fontbuf= self.Font_img[Str[i]]
#        Fontb=framebuf.FrameBuffer(Fontbuf, 8, 13, framebuf.MONO_VLSB) # Инструментарий переноса    
#        fbuf.blit(Fontb, x, y, 0)
#        x=x+Fontbuf[16]+1
#    lcd.data(buffer)               
#    del(x1,i)
 
